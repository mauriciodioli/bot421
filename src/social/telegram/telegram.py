# Creating  Routes
from pipes import Template
from unittest import result
from flask import current_app

import requests
import json
from flask import Blueprint, render_template, request, redirect, url_for, flash,jsonify
from models.instrumento import Instrumento
from utils.db import db
import routes.api_externa_conexion.get_login as get
import tokens.token as Token
import jwt
import asyncio
from models.usuario import Usuario
from models.brokers import Broker
from models.modelMedia.TelegramNotifier import TelegramNotifier

telegram = Blueprint('telegram',__name__)




@telegram.route('/telegram-envia-mensaje/')
def telegram_envia_mensaje():       
    return render_template('media/telegram/telegramEnviaMensaje.html', layout = 'layout')

@telegram.route('/telegram-envia-mensaje-grupo', methods=['POST'])
def telegram_envia_mensaje_grupo():
    try:
        if request.method == 'POST':
            data = request.get_json()  # Obtener los datos JSON del cuerpo de la solicitud
            access_token = data.get('access_token')          
            mensaje = data.get('message')
            
            chat_id = "-1001285216353"
          
            # Asumiendo que TelegramNotifier estÃ¡ correctamente definido en otro lugar
            telegram_notifier = TelegramNotifier()
            asyncio.run(telegram_notifier.enviar_mensaje_grupo(chat_id,mensaje))

            return render_template('media/telegam/telegramEnviaMensaje.html', layout='layout')
    except Exception as e:
        # Tu cÃ³digo de manejo de excepciones aquÃ­
        return render_template('notificaciones/errorOperacionSinCuenta.html', layout='layouts')

    return render_template('media/telegam/telegramEnviaMensaje.html', layout='layout')


@telegram.route('/emoticons', methods=['GET'])
def get_emoticons():
    # Lista completa de emoticonos y sÃ­mbolos
    emoticons_and_symbols = [
        # Emoticones
        "ğŸ˜€", "ğŸ˜", "ğŸ˜‚", "ğŸ¤£", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜…", "ğŸ˜†", "ğŸ˜‰",
        "ğŸ˜Š", "ğŸ˜‡", "ğŸ˜", "ğŸ˜˜", "ğŸ˜—", "ğŸ˜™", "ğŸ˜š", "ğŸ¤—", "ğŸ¤”",
        "ğŸ¤", "ğŸ¤¨", "ğŸ¤©", "ğŸ¤ª", "ğŸ¤«", "ğŸ¤­", "ğŸ¤¯", "ğŸ¤ ", "ğŸ¤¡",
        "ğŸ¤¥", "ğŸ¤§", "ğŸ˜·", "ğŸ¤’", "ğŸ¤•", "ğŸ¤¢", "ğŸ¤®", "ğŸ˜µ", "ğŸ˜´",
        "ğŸ˜ª", "ğŸ˜°", "ğŸ˜¥", "ğŸ˜¢", "ğŸ˜­", "ğŸ˜“", "ğŸ˜©", "ğŸ˜«", "ğŸ˜¤",
        "ğŸ˜¡", "ğŸ˜ ", "ğŸ¤¬", "ğŸ˜³", "ğŸ˜¶", "ğŸ˜‘", "ğŸ˜¬", "ğŸ™„", "ğŸ˜¯",
        "ğŸ˜²", "ğŸ¥º", "ğŸ¤¤", "ğŸ¤¢", "ğŸ¤®", "ğŸ¤§",
        "ğŸ§‘â€âš•ï¸", "ğŸ‘¨â€âš•ï¸", "ğŸ‘©â€âš•ï¸", "ğŸ§‘â€ğŸ“", "ğŸ‘¨â€ğŸ“", "ğŸ‘©â€ğŸ“", "ğŸ§‘â€ğŸ«", "ğŸ‘¨â€ğŸ«", 
        "ğŸ‘©â€ğŸ«", "ğŸ§‘â€âš–ï¸", "ğŸ‘¨â€âš–ï¸", "ğŸ‘©â€âš–ï¸", "ğŸ§‘â€ğŸŒ¾", "ğŸ‘¨â€ğŸŒ¾", "ğŸ‘©â€ğŸŒ¾", "ğŸ§‘â€ğŸ³",
        "ğŸ‘¨â€ğŸ³", "ğŸ‘©â€ğŸ³", "ğŸ§‘â€ğŸ”§", "ğŸ‘¨â€ğŸ”§", "ğŸ‘©â€ğŸ”§", "ğŸ§‘â€ğŸ­", "ğŸ‘¨â€ğŸ­", "ğŸ‘©â€ğŸ­", 
        "ğŸ§‘â€ğŸ’¼", "ğŸ‘¨â€ğŸ’¼", "ğŸ‘©â€ğŸ’¼", "ğŸ§‘â€ğŸ”¬", "ğŸ‘¨â€ğŸ”¬", "ğŸ‘©â€ğŸ”¬", "ğŸ§‘â€ğŸ’»", "ğŸ‘¨â€ğŸ’»",
        "ğŸ‘©â€ğŸ’»", "ğŸ§‘â€ğŸ¤", "ğŸ‘¨â€ğŸ¤", "ğŸ‘©â€ğŸ¤", "ğŸ§‘â€ğŸ¨", "ğŸ‘¨â€ğŸ¨", "ğŸ‘©â€ğŸ¨", "ğŸ§‘â€âœˆï¸", 
        "ğŸ‘¨â€âœˆï¸", "ğŸ‘©â€âœˆï¸", "ğŸ§‘â€ğŸš€", "ğŸ‘¨â€ğŸš€", "ğŸ‘©â€ğŸš€", "ğŸ§‘â€ğŸš’", "ğŸ‘¨â€ğŸš’", "ğŸ‘©â€ğŸš’", "ğŸ‘®", 
        "ğŸ‘®â€â™‚ï¸", "ğŸ‘®â€â™€ï¸", "ğŸ•µï¸", "ğŸ•µï¸â€â™‚ï¸", "ğŸ•µï¸â€â™€ï¸", "ğŸ’‚", "ğŸ’‚â€â™‚ï¸", "ğŸ’‚â€â™€ï¸", "ğŸ¥·", "ğŸ‘·", 
        "ğŸ‘·â€â™‚ï¸", "ğŸ‘·â€â™€ï¸", "ğŸ«…", "ğŸ¤´", "ğŸ‘¸", "ğŸ‘³", "ğŸ‘³â€â™‚ï¸", "ğŸ‘³â€â™€ï¸", "ğŸ‘²", 
        "ğŸ§•", "ğŸ¤µ", "ğŸ¤µâ€â™‚ï¸", "ğŸ¤µâ€â™€ï¸", "ğŸ‘°", "ğŸ‘°â€â™‚ï¸", "ğŸ‘°â€â™€ï¸", "ğŸ¤°", 
        "ğŸ«ƒ", "ğŸ«„", "ğŸ¤±", "ğŸ‘©â€ğŸ¼", "ğŸ‘¨â€ğŸ¼", "ğŸ§‘â€ğŸ¼", "ğŸ’", "ğŸ’â€â™‚ï¸", "ğŸ’â€â™€ï¸", 
        "ğŸ§‘â€ğŸ’»", "ğŸ‘¨â€ğŸ’»", "ğŸ‘©â€ğŸ’»", "ğŸ—£ï¸", "ğŸ‘ª", "ğŸ ", "ğŸ¡", "ğŸ”Š", "ğŸ™ï¸",
        "ğŸ§", "ğŸ“±", "ğŸ“²", "â˜ï¸", "ğŸ“", "ğŸ“ ", "ğŸ’»", "ğŸ–¥ï¸", "âŒ¨ï¸",
        "ğŸ–±ï¸", "ğŸ“¹", "ğŸ“”", "ğŸ“–", "ğŸ“š", "ğŸ““", "ğŸ“ƒ", "ğŸ”–", "âœï¸", 
        "ğŸ–‹ï¸", "ğŸ–Šï¸", "ğŸ“", "ğŸ–‡ï¸",  "ğŸ³ï¸", "ğŸ´", "ğŸ", "ğŸš©","ğŸ‡¦ğŸ‡·", "ğŸ‡§ğŸ‡·",
        "ğŸ‡¨ğŸ‡¦", "ğŸ‡¨ğŸ‡±", "ğŸ‡¨ğŸ‡³", "ğŸ‡«ğŸ‡·","ğŸ‡©ğŸ‡ª", "ğŸ‡®ğŸ‡³", "ğŸ‡¯ğŸ‡µ", "ğŸ‡²ğŸ‡½", "ğŸ‡·ğŸ‡º", "ğŸ‡ªğŸ‡¸", "ğŸ‡¬ğŸ‡§", 
        "ğŸ‡ºğŸ‡¸", "ğŸ‡¦ğŸ‡®", "ğŸ‡¦ğŸ‡±", "ğŸ‡¦ğŸ‡²", "ğŸ‡¦ğŸ‡´", "ğŸ‡¦ğŸ‡¶","ğŸ‡¦ğŸ‡¸", "ğŸ‡¦ğŸ‡¹", "ğŸ‡¦ğŸ‡º", 
        "ğŸ‡¦ğŸ‡¼", "ğŸ‡¦ğŸ‡½","ğŸ‡¦ğŸ‡¿", "ğŸ‡§ğŸ‡¦", "ğŸ‡§ğŸ‡§", "ğŸ‡§ğŸ‡©", "ğŸ‡§ğŸ‡ª", "ğŸ‡§ğŸ‡«", "ğŸ‡§ğŸ‡¬", "ğŸ‡§ğŸ‡­", "ğŸ‡§ğŸ‡®",
        "ğŸ‡§ğŸ‡¯","ğŸ‡§ğŸ‡±", "ğŸ‡§ğŸ‡²", "ğŸ‡§ğŸ‡³", "ğŸ‡§ğŸ‡´", "ğŸ‡§ğŸ‡¶", "ğŸ‡§ğŸ‡·", "ğŸ‡§ğŸ‡¸", "ğŸ‡§ğŸ‡¹", "ğŸ‡§ğŸ‡»", "ğŸ‡§ğŸ‡¼", 
        "ğŸ‡§ğŸ‡¾", "ğŸ‡§ğŸ‡¿", "ğŸ‡¨ğŸ‡¦", "ğŸ‡¨ğŸ‡¨", "ğŸ‡¨ğŸ‡©", "ğŸ‡¨ğŸ‡«", "ğŸ‡¨ğŸ‡¬", "ğŸ‡¨ğŸ‡­", "ğŸ‡¨ğŸ‡®", "ğŸ‡¨ğŸ‡°", 
        "ğŸ‡¨ğŸ‡±", "ğŸ‡¨ğŸ‡²", "ğŸ‡¨ğŸ‡³", "ğŸ‡¨ğŸ‡´", "ğŸ‡¨ğŸ‡µ", "ğŸ‡¨ğŸ‡·", "ğŸ‡¨ğŸ‡º", "ğŸ‡¨ğŸ‡»", "ğŸ‡¨ğŸ‡¼", "ğŸ‡¨ğŸ‡½",        
        "ğŸ‡µğŸ‡³", "ğŸ‡µğŸ‡·", "ğŸ‡µğŸ‡¸", "ğŸ‡µğŸ‡¹", "ğŸ‡µğŸ‡¼", "ğŸ‡µğŸ‡¾", "ğŸ‡¶ğŸ‡¦", "ğŸ‡·ğŸ‡ª", "ğŸ‡·ğŸ‡´", "ğŸ‡·ğŸ‡¸", 
        "ğŸ‡·ğŸ‡º", "ğŸ‡·ğŸ‡¼", "ğŸ‡¸ğŸ‡¦", "ğŸ‡¸ğŸ‡§", "ğŸ‡¸ğŸ‡¨", "ğŸ‡¸ğŸ‡©", "ğŸ‡¸ğŸ‡ª", "ğŸ‡¸ğŸ‡¬", "ğŸ‡¸ğŸ‡­", "ğŸ‡¸ğŸ‡®", 
        "ğŸ‡¸ğŸ‡¯", "ğŸ‡¸ğŸ‡°", "ğŸ‡¸ğŸ‡±", "ğŸ‡¸ğŸ‡²", "ğŸ‡¸ğŸ‡³", "ğŸ‡¸ğŸ‡´", "ğŸ‡¸ğŸ‡·", "ğŸ‡¸ğŸ‡¸", "ğŸ‡¸ğŸ‡¹", "ğŸ‡¸ğŸ‡»", "ğŸ‡¸ğŸ‡½", 
        "ğŸ‡¸ğŸ‡¾", "ğŸ‡¸ğŸ‡¿", "ğŸ‡¹ğŸ‡¦", "ğŸ‡¹ğŸ‡¨", "ğŸ‡¹ğŸ‡©", "ğŸ‡¹ğŸ‡«", "ğŸ‡¹ğŸ‡¬", "ğŸ‡¹ğŸ‡­", "ğŸ‡¹ğŸ‡¯", "ğŸ‡¹ğŸ‡°", "ğŸ‡¹ğŸ‡±", 
        "ğŸ‡¹ğŸ‡²", "ğŸ‡¹ğŸ‡³", "ğŸ‡¹ğŸ‡´", "ğŸ‡¹ğŸ‡·", "ğŸ‡¹ğŸ‡¹", "ğŸ‡¹ğŸ‡»", "ğŸ‡¹ğŸ‡¼", "ğŸ‡¹ğŸ‡¿", "ğŸ‡ºğŸ‡¦", "ğŸ‡ºğŸ‡¬",        

        # SÃ­mbolos de dinero y negocios
        "ğŸ’°", "ğŸ’¸", "ğŸ’µ", "ğŸ’´", "ğŸ’¶", "ğŸ’·", "ğŸª™", "ğŸ¤‘", "ğŸ’³",
        "ğŸ¦", "ğŸ§", "ğŸ’¹", "ğŸ’²", "ğŸ“ˆ", "ğŸ“‰", "ğŸ”", "ğŸ”", "ğŸ’¼",
        "ğŸ“Š", "ğŸ“‹", "ğŸ“", "ğŸ“‚", "ğŸ—‚", "ğŸ—ƒ", "ğŸ—„", "ğŸ—‘", "ğŸ”’",
        "ğŸ”“", "ğŸ”", "ğŸ”", "ğŸ”‘", "ğŸ’¡", 
        # SÃ­mbolos de colores y amor
        "â¤ï¸", "ğŸ§¡", "ğŸ’›", "ğŸ’š", "ğŸ’™", "ğŸ’œ", "ğŸ–¤", "ğŸ¤", "ğŸ¤",
        "ğŸ’”", "â¤ï¸â€ğŸ”¥", "â¤ï¸â€ğŸ©¹",
        "ğŸ’•", "ğŸ’", "ğŸ’“", "ğŸ’—", "ğŸ’–", "ğŸ’˜", "ğŸ’", "ğŸ’Œ",
        # Animales
        "ğŸ±", "ğŸ¶", "ğŸ­", "ğŸ¹", "ğŸ°", "ğŸ¦Š", "ğŸ¸", "ğŸ¦„",
        # Estrellas y clima
        "ğŸŒŸ", "ğŸ’«", "ğŸ’¥", "ğŸ’¨", "ğŸ’¦", "ğŸŒˆ", "â˜€ï¸", "ğŸŒ¤", "â›…ï¸",
        "ğŸŒ§", "ğŸŒ¨", "ğŸŒ©", "âš¡ï¸", "â˜”ï¸", "ğŸŒª", "ğŸŒ«", "ğŸŒ¬",
        "ğŸŒˆ", "ğŸŒ¤", "ğŸŒ¥", "â˜€ï¸", "ğŸŒœ", "ğŸŒ›", "ğŸŒ", "ğŸŒ",
        # Celebraciones
        "ğŸ‰", "ğŸŠ", "ğŸˆ", "ğŸ‚", "ğŸ", "ğŸ", "ğŸ€", "ğŸŠ",
            # Celulares y tecnologÃ­a
        "ğŸ“±", "ğŸ“²", "ğŸ“", "ğŸ“Ÿ", "ğŸ“ ", "ğŸ’»", "ğŸ–¥", "ğŸ–¨", "ğŸ–±",
        "âŒ¨ï¸", "ğŸ–²", "ğŸ“¡", "ğŸ”Œ", "ğŸ”‹", "ğŸ”", "ğŸ”",
        # Personas
        "ğŸ‘¤", "ğŸ‘¥", "ğŸ§‘", "ğŸ§‘â€ğŸ¦°", "ğŸ§‘â€ğŸ¦±", "ğŸ§‘â€ğŸ¦²", "ğŸ§‘â€ğŸ¦³",
        "ğŸ‘©", "ğŸ‘©â€ğŸ¦°", "ğŸ‘©â€ğŸ¦±", "ğŸ‘©â€ğŸ¦²", "ğŸ‘©â€ğŸ¦³", "ğŸ‘¨", "ğŸ‘¨â€ğŸ¦°",
        "ğŸ‘¨â€ğŸ¦±", "ğŸ‘¨â€ğŸ¦²", "ğŸ‘¨â€ğŸ¦³", "ğŸ§“", "ğŸ‘´", "ğŸ‘µ", "ğŸ‘¶",
        "ğŸ‘¦", "ğŸ‘§", "ğŸ‘§â€ğŸ¦±","ğŸ¤µ", "ğŸ‘°", "ğŸ‘¸",
        "ğŸ¤´", "ğŸ¦¸", "ğŸ¦¹", "ğŸ§š", "ğŸ§œ", "ğŸ§", "ğŸ§", "ğŸ§Ÿ", "ğŸ§“",
        "ğŸ¤¶", "ğŸ§‘â€ğŸ„", "ğŸ¢", "ğŸ£","ğŸŸï¸", "ğŸ›ï¸", "ğŸ—ï¸", "ğŸ§±", "ğŸª¨",
        "ğŸªµ", "ğŸ›–", "ğŸ˜ï¸", "ğŸšï¸", "ğŸ ", "ğŸ¡", "ğŸ¢", "ğŸ£", "ğŸ¤", 
        "ğŸ¥", "ğŸ¦", "ğŸ¨", "ğŸ©", "ğŸª", "ğŸ«", "ğŸ¬", "ğŸ­", "ğŸ¯", 
        "ğŸ°", "ğŸ’’", "ğŸ—¼", "ğŸ—½"

    ]
    return jsonify(emoticons_and_symbols)