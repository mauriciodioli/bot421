{% with messages = get_flashed_messages()%}
{% if messages %}
{% for message in messages%}  
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        {{message}}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
{% endfor %}
{% endif %}
{% endwith %}
{% extends 'layouts/layoutConexBroker.html'%}
{% block content%}

<div class = 'container p-4'>
    <table class="table table-dark table-striped"  id="tablaDatos">
        <thead>           
            <tr>
                <th scope="col">Ficha</th>
                <th scope="col">Usuario</th>
                <th scope="col">Inicial</th>
                <th scope="col">Capitalizacion</th>
                <th scope="col">Estado</th>                     
                <th scope="col">Operaciones</th>
            </tr>            
        </thead>
        <tbody>
            {% for fichas in datos %}
                <tr>
                    <th scope="row">{{fichas.id}}</th>
                    <td>{{ fichas.user_id }}</td>       
                    <td>{{ fichas.monto_efectivo }}</td>
                    <td>{{ fichas.interes }}%</td>
                    <td>{{fichas.estado }}</td>                                                       
                    <td class="d-flex"> 
           
                        <button type="button" class="btn btn-danger mx-2" data-bs-toggle="modal" data-bs-target="#eliminarFichaModal"  data-ficha-id="{{ fichas.id }}" onclick="setFichaData( this.getAttribute('data-ficha-id'))">Eliminar</button>
                        <button type="button" class="btn btn-success  mx-2" data-bs-toggle="modal" data-bs-target="#tokenFichaModal"  data-ficha-llave="{{ fichas.random_number }}"  data-ficha-monto="{{ fichas.monto_efectivo }}"  onclick="setFichaDataToken(this.getAttribute('data-ficha-llave'),this.getAttribute('data-ficha-monto'))"><srtrong>TOKEN</strong></button>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{%endblock%}
 